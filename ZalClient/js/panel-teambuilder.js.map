{"version":3,"file":"panel-teambuilder.js","names":["PSTextarea","_preact$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","updateSize","textbox","base","querySelector","textboxTest","style","width","offsetWidth","value","setAttribute","props","initialValue","newHeight","Math","max","scrollHeight","height","_inheritsLoose","_proto","prototype","componentDidMount","window","addEventListener","componentWillUnmount","removeEventListener","render","preact","h","name","onInput","onKeyUp","Component","TeambuilderRoom","_PSRoom","_this2","_len2","_key2","DEFAULT_FORMAT","Dex","modid","curFolder","curFolderKeep","searchTerms","exportMode","exportCode","clientCommands","parseClientCommands","newteam","target","isBox","includes","PS","teams","push","createTeam","unshift","save","update","deleteteam","team","byKey","errorReply","copyteam","TeamEditorState","copyTeam","pasteteamabove,moveteamabove","cmd","_this$curFolder","index","list","indexOf","folder","endsWith","slice","pasteTeam","undeleteteam","undelete","backup","setExportMode","createfolder","alert","replace","renamefolder","oldFolder","_i2","_PS$teams$list2","deletefolder","_i4","_PS$teams$list4","convertfoldertoprefix","_i6","_PS$teams$list6","updateSearch","split","map","q","trim","toLowerCase","matchesSearch","normalized","packedTeam","every","term","_proto2","sendDirect","msg","partial","newExportMode","copyFrom","undefined","format","iconCache","key","PSRoom","TeambuilderPanel","_PSRoomPanel","_this3","_len3","_key3","clickFolder","e","room","elem","getAttribute","className","parentElement","preventDefault","stopImmediatePropagation","prompt","parentElem","okButton","then","send","forceUpdate","addFormatFolder","ev","button","currentTarget","toID","dragEnterTeam","_ev$currentTarget","draggedTeam","getDraggedTeam","iOver","dragging","iDragged","splice","dragEnterFolder","_ev$currentTarget2","_PS$dragging","type","dragLeaveFolder","_ev$currentTarget3","_PS$dragging2","dropFolder","_ev$currentTarget4","_PS$dragging3","addDraggedTeam","clearSearch","saveExport","_querySelector","PSTeambuilder","importTeamBackup","_i8","renameFolder","defaultValue","promptDeleteFolder","confirm","otherButtons","result","cancelClipboard","clipboard","_proto3","_PS$dragging4","_ref","dataTransfer","console","log","types","files","file","extractDraggedTeam","_ev$dataTransfer","_file$text","text","sets","Teams","_unused","bracketIndex","startsWith","pack","_PS$dragging5","_this$extractDraggedT","pop","join","handleDrop","_PS$dragging6","_PS$dragging7","_PS$rooms$teambuilder","rooms","renderFolder","_PS$dragging8","cur","children","folderOpenIcon","active","onDragEnter","onDragLeave","onDrop","renderFolderList","folderTable","folders","_i10","_PS$teams$list8","PSUtils","sortBy","parseInt","charAt","renderedFormatFolders","onChange","renderedFolders","gen","_i12","newGen","onClick","visibleTeams","filterFolder","filter","filterFormat","filteredTeams","renderTeamPane","_PS$dragging9","_this4","isDragging","deletedTeams","undeleteIndex","teamTerm","BattleLog","formatName","_room$exportCode","disabled","packAll","Boolean","clipboardTeams","renderClipboard","placeholder","_team$uploaded","readonly","TeamBox","title","uploaded","teamid","PSPanelWrapper","PSRoomPanel","id","routes","Model","icon","addRoomType"],"sources":["../src/panel-teambuilder.tsx"],"sourcesContent":["/**\r\n * Teambuilder panel\r\n *\r\n * @author Guangcong Luo <guangcongluo@gmail.com>\r\n * @license AGPLv3\r\n */\r\n\r\nimport { PS, PSRoom, type RoomID, type Team } from \"./client-main\";\r\nimport { PSPanelWrapper, PSRoomPanel } from \"./panels\";\r\nimport { PSTeambuilder, TeamBox } from \"./panel-teamdropdown\";\r\nimport { Dex, PSUtils, toID, type ID } from \"./battle-dex\";\r\nimport { Teams } from \"./battle-teams\";\r\nimport { BattleLog } from \"./battle-log\";\r\nimport preact from \"../js/lib/preact\";\r\nimport { TeamEditorState } from \"./battle-team-editor\";\r\n\r\nclass PSTextarea extends preact.Component<{ initialValue?: string, name?: string }> {\r\n\tupdateSize = () => {\r\n\t\tconst textbox = this.base!.querySelector('textarea')!;\r\n\t\tconst textboxTest = this.base!.querySelector<HTMLTextAreaElement>('textarea.heighttester')!;\r\n\t\ttextboxTest.style.width = `${textbox.offsetWidth}px`;\r\n\t\ttextboxTest.value = textbox.value;\r\n\t\ttextbox.setAttribute('data-changed', textbox.value === this.props.initialValue ? '' : '1');\r\n\t\tconst newHeight = Math.max(textboxTest.scrollHeight + 40, 50);\r\n\t\ttextbox.style.height = `${newHeight}px`;\r\n\t};\r\n\toverride componentDidMount(): void {\r\n\t\tconst textbox = this.base!.querySelector('textarea')!;\r\n\t\tif (this.props.initialValue) {\r\n\t\t\ttextbox.value = this.props.initialValue;\r\n\t\t}\r\n\t\tthis.updateSize();\r\n\t\twindow.addEventListener('resize', this.updateSize);\r\n\t}\r\n\toverride componentWillUnmount(): void {\r\n\t\twindow.removeEventListener('resize', this.updateSize);\r\n\t}\r\n\toverride render() {\r\n\t\treturn <div style=\"position:relative\">\r\n\t\t\t<textarea\r\n\t\t\t\tname={this.props.name} class=\"textbox\" onInput={this.updateSize} onKeyUp={this.updateSize}\r\n\t\t\t\tstyle=\"box-sizing:border-box;width:100%;resize:none\"\r\n\t\t\t/>\r\n\t\t\t<div><textarea\r\n\t\t\t\tclass=\"textbox heighttester\"\r\n\t\t\t\tstyle=\"box-sizing:border-box;resize:none;height:50px;visibility:hidden;position:absolute;left:-200px\"\r\n\t\t\t/></div>\r\n\t\t</div>;\r\n\t}\r\n}\r\n\r\nclass TeambuilderRoom extends PSRoom {\r\n\treadonly DEFAULT_FORMAT = Dex.modid;\r\n\r\n\t/**\r\n\t * - `\"\"` - all\r\n\t * - `\"gen[NUMBER][ID]\"` - format folder\r\n\t * - `\"gen[NUMBER]\"` - uncategorized gen folder\r\n\t * - `\"[ID]/\"` - folder\r\n\t * - `\"/\"` - not in folder\r\n\t */\r\n\tcurFolder = '';\r\n\tcurFolderKeep = '';\r\n\tsearchTerms: string[] = [];\r\n\texportMode: boolean | 'partial' = false;\r\n\texportCode: string | null = null;\r\n\r\n\toverride clientCommands = this.parseClientCommands({\r\n\t\t'newteam'(target) {\r\n\t\t\tconst isBox = ` ${target} `.includes(' box ');\r\n\t\t\tif (` ${target} `.includes(' bottom ')) {\r\n\t\t\t\tPS.teams.push(this.createTeam(null, isBox));\r\n\t\t\t} else {\r\n\t\t\t\tPS.teams.unshift(this.createTeam(null, isBox));\r\n\t\t\t}\r\n\t\t\tPS.teams.save();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'deleteteam'(target) {\r\n\t\t\tconst team = PS.teams.byKey[target];\r\n\t\t\tif (!team) return this.errorReply(`Team not found: ${target}`);\r\n\r\n\t\t\tPS.teams.delete(team);\r\n\t\t\tPS.teams.save();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'copyteam'(target) {\r\n\t\t\tconst team = PS.teams.byKey[target];\r\n\t\t\tif (!team) return this.errorReply(`Team not found: ${target}`);\r\n\r\n\t\t\tTeamEditorState.copyTeam(team);\r\n\r\n\t\t\tPS.update();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'pasteteamabove,moveteamabove'(target, cmd) {\r\n\t\t\tconst team = PS.teams.byKey[target];\r\n\t\t\tif (target !== '-' && !team) return this.errorReply(`Team not found: ${target}`);\r\n\r\n\t\t\tconst index = team ? PS.teams.list.indexOf(team) : PS.teams.list.length;\r\n\t\t\tconst folder = this.curFolder?.endsWith('/') ? this.curFolder.slice(0, -1) : '';\r\n\t\t\tTeamEditorState.pasteTeam(index, cmd === 'moveteamabove', folder);\r\n\t\t\tPS.teams.save();\r\n\r\n\t\t\tPS.update();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'undeleteteam'() {\r\n\t\t\tPS.teams.undelete();\r\n\t\t\tPS.teams.save();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'backup'() {\r\n\t\t\tthis.setExportMode(!this.exportMode);\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'createfolder'(name) {\r\n\t\t\tif (name.includes('/') || name.includes('\\\\')) {\r\n\t\t\t\tPS.alert(\"Names can't contain slashes, since they're used as a folder separator.\");\r\n\t\t\t\tname = name.replace(/[\\\\/]/g, '');\r\n\t\t\t}\r\n\t\t\tif (name.includes('|')) {\r\n\t\t\t\tPS.alert(\"Names can't contain the character |, since they're used for storing teams.\");\r\n\t\t\t\tname = name.replace(/\\|/g, '');\r\n\t\t\t}\r\n\t\t\tif (!name) return this.errorReply('Name required');\r\n\r\n\t\t\tthis.curFolderKeep = `${name}/`;\r\n\t\t\tthis.curFolder = `${name}/`;\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'renamefolder'(name) {\r\n\t\t\tif (!name) return this.errorReply('New name required');\r\n\t\t\tif (!this.curFolder.endsWith('/')) return this.errorReply('Not in a folder');\r\n\r\n\t\t\tif (name.includes('/') || name.includes('\\\\')) {\r\n\t\t\t\tPS.alert(\"Names can't contain slashes, since they're used as a folder separator.\");\r\n\t\t\t\tname = name.replace(/[\\\\/]/g, '');\r\n\t\t\t}\r\n\t\t\tif (name.includes('|')) {\r\n\t\t\t\tPS.alert(\"Names can't contain the character |, since they're used for storing teams.\");\r\n\t\t\t\tname = name.replace(/\\|/g, '');\r\n\t\t\t}\r\n\r\n\t\t\tconst oldFolder = this.curFolder.slice(0, -1);\r\n\t\t\tfor (const team of PS.teams.list) {\r\n\t\t\t\tif (team.folder !== oldFolder) continue;\r\n\t\t\t\tteam.folder = name;\r\n\t\t\t}\r\n\t\t\tif (this.curFolderKeep === this.curFolder) this.curFolderKeep = `${name}/`;\r\n\t\t\tthis.curFolder = `${name}/`;\r\n\t\t\tPS.teams.save();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'deletefolder'() {\r\n\t\t\tif (!this.curFolder.endsWith('/')) return this.errorReply('Not in a folder');\r\n\r\n\t\t\tconst oldFolder = this.curFolder.slice(0, -1);\r\n\t\t\tfor (const team of PS.teams.list) {\r\n\t\t\t\tif (team.folder !== oldFolder) continue;\r\n\t\t\t\tteam.folder = '';\r\n\t\t\t}\r\n\t\t\tif (this.curFolderKeep === this.curFolder) this.curFolderKeep = '';\r\n\t\t\tthis.curFolder = '';\r\n\t\t\tPS.teams.save();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t\t'convertfoldertoprefix'() {\r\n\t\t\tif (!this.curFolder.endsWith('/')) return this.errorReply('Not in a folder');\r\n\r\n\t\t\tconst oldFolder = this.curFolder.slice(0, -1);\r\n\t\t\tfor (const team of PS.teams.list) {\r\n\t\t\t\tif (team.folder !== oldFolder) continue;\r\n\t\t\t\tteam.folder = '';\r\n\t\t\t\tteam.name = `${oldFolder} ${team.name}`;\r\n\t\t\t}\r\n\t\t\tif (this.curFolderKeep === this.curFolder) this.curFolderKeep = '';\r\n\t\t\tthis.curFolder = '';\r\n\t\t\tPS.teams.save();\r\n\t\t\tthis.update(null);\r\n\t\t},\r\n\t});\r\n\toverride sendDirect(msg: string): void {\r\n\t\tPS.alert(`Unrecognized command: ${msg}`);\r\n\t}\r\n\r\n\tsetExportMode(exportMode: boolean) {\r\n\t\tconst partial = this.searchTerms.length || this.curFolder ? 'partial' : true;\r\n\t\tconst newExportMode = exportMode ? partial : false;\r\n\r\n\t\tif (newExportMode === this.exportMode) return;\r\n\t\tthis.exportMode = newExportMode;\r\n\t\tthis.exportCode = null;\r\n\t}\r\n\tcreateTeam(copyFrom?: Team | null, isBox = false): Team {\r\n\t\tif (copyFrom) {\r\n\t\t\treturn {\r\n\t\t\t\tname: `Copy of ${copyFrom.name}`,\r\n\t\t\t\tformat: copyFrom.format,\r\n\t\t\t\tfolder: copyFrom.folder,\r\n\t\t\t\tpackedTeam: copyFrom.packedTeam,\r\n\t\t\t\ticonCache: null,\r\n\t\t\t\tisBox: copyFrom.isBox,\r\n\t\t\t\tkey: '',\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst format = this.curFolder && !this.curFolder.endsWith('/') ? this.curFolder as ID : this.DEFAULT_FORMAT;\r\n\t\t\tconst folder = this.curFolder.endsWith('/') ? this.curFolder.slice(0, -1) : '';\r\n\t\t\treturn {\r\n\t\t\t\tname: `${isBox ? \"Box\" : \"Untitled\"} ${PS.teams.list.length + 1}`,\r\n\t\t\t\tformat,\r\n\t\t\t\tfolder,\r\n\t\t\t\tpackedTeam: '',\r\n\t\t\t\ticonCache: null,\r\n\t\t\t\tisBox,\r\n\t\t\t\tkey: '',\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\tupdateSearch = (value: string) => {\r\n\t\tif (!value) {\r\n\t\t\tthis.searchTerms = [];\r\n\t\t} else {\r\n\t\t\tthis.searchTerms = value.split(\",\").map(q => q.trim().toLowerCase());\r\n\t\t}\r\n\t};\r\n\tmatchesSearch = (team: Team) => {\r\n\t\tif (this.searchTerms.length === 0) return true;\r\n\t\tconst normalized = team.packedTeam.toLowerCase();\r\n\t\treturn this.searchTerms.every(term => normalized.includes(term));\r\n\t};\r\n}\r\n\r\nclass TeambuilderPanel extends PSRoomPanel<TeambuilderRoom> {\r\n\tstatic readonly id = 'teambuilder';\r\n\tstatic readonly routes = ['teambuilder'];\r\n\tstatic readonly Model = TeambuilderRoom;\r\n\tstatic readonly icon = <i class=\"fa fa-pencil-square-o\" aria-hidden></i>;\r\n\tstatic readonly title = 'Teambuilder';\r\n\tclickFolder = (e: MouseEvent) => {\r\n\t\tconst room = this.props.room;\r\n\t\tlet elem = e.target as HTMLElement | null;\r\n\t\tlet folder: string | null = null;\r\n\t\twhile (elem) {\r\n\t\t\tif (elem.getAttribute('data-href')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (elem.className === 'selectFolder') {\r\n\t\t\t\tfolder = elem.getAttribute('data-value') || '';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (elem.className === 'folderlist') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telem = elem.parentElement;\r\n\t\t}\r\n\t\tif (folder === null) return;\r\n\t\te.preventDefault();\r\n\t\te.stopImmediatePropagation();\r\n\t\tif (folder === '++') {\r\n\t\t\tPS.prompt(\"Folder name?\", { parentElem: elem, okButton: \"Create\" }).then(name => {\r\n\t\t\t\tname = (name || '').trim();\r\n\t\t\t\tif (!name) return;\r\n\r\n\t\t\t\troom.send(`/createfolder ${name}`, elem);\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\troom.curFolder = folder;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\taddFormatFolder = (ev: Event) => {\r\n\t\tconst room = this.props.room;\r\n\t\tconst button = ev.currentTarget as HTMLButtonElement;\r\n\t\tconst folder = toID(button.value);\r\n\t\troom.curFolderKeep = folder;\r\n\t\troom.curFolder = folder;\r\n\t\tbutton.value = '';\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\t/** undefined: not dragging, null: dragging a new team */\r\n\tgetDraggedTeam(ev: DragEvent): Team | number | null {\r\n\t\tif (PS.dragging?.type === 'team') return PS.dragging.team;\r\n\r\n\t\tconst dataTransfer = ev.dataTransfer;\r\n\t\tif (!dataTransfer) return null;\r\n\r\n\t\tPS.dragging = { type: '?' };\r\n\t\tconsole.log(`dragging: ${dataTransfer.types as any} | ${[...dataTransfer.files]?.map(file => file.name) as any}`);\r\n\t\tif (!dataTransfer.types.includes?.('Files')) return null;\r\n\t\t// MDN says files will be empty except on a Drop event, but the spec says no such thing\r\n\t\t// in practice, Chrome gives this info but Firefox doesn't\r\n\t\tif (dataTransfer.files[0] && !dataTransfer.files[0].name.endsWith('.txt')) return null;\r\n\r\n\t\t// We're dragging a file! It might be a team!\r\n\t\tPS.dragging = {\r\n\t\t\ttype: 'team',\r\n\t\t\tteam: 0,\r\n\t\t\tfolder: null,\r\n\t\t};\r\n\t\treturn PS.dragging.team;\r\n\t}\r\n\tdragEnterTeam = (ev: DragEvent) => {\r\n\t\tconst draggedTeam = this.getDraggedTeam(ev);\r\n\t\tif (draggedTeam === null) return;\r\n\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-teamkey');\r\n\t\tconst team = value ? PS.teams.byKey[value] : null;\r\n\t\tif (!team || team === draggedTeam) return;\r\n\r\n\t\tconst iOver = PS.teams.list.indexOf(team);\r\n\t\tif (typeof draggedTeam === 'number') {\r\n\t\t\tif (iOver >= draggedTeam) (PS.dragging as any).team = iOver + 1;\r\n\t\t\t(PS.dragging as any).team = iOver;\r\n\t\t\tthis.forceUpdate();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst iDragged = PS.teams.list.indexOf(draggedTeam);\r\n\t\tif (iDragged < 0 || iOver < 0) return; // shouldn't happen\r\n\r\n\t\tPS.teams.list.splice(iDragged, 1);\r\n\t\t// by coincidence, splicing into iOver works in both directions\r\n\t\t// before: Dragged goes before Over, splice at i\r\n\t\t// after: Dragged goes after Over, splice at i - 1 + 1\r\n\t\tPS.teams.list.splice(iOver, 0, draggedTeam);\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tdragEnterFolder = (ev: DragEvent) => {\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-value') || null;\r\n\t\tif (value === null || PS.dragging?.type !== 'team') return;\r\n\t\tif (value === '++' || value === '') return;\r\n\r\n\t\tPS.dragging.folder = value;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tdragLeaveFolder = (ev: DragEvent) => {\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-value') || null;\r\n\t\tif (value === null || PS.dragging?.type !== 'team') return;\r\n\t\tif (value === '++' || value === '') return;\r\n\r\n\t\tif (PS.dragging.folder === value) PS.dragging.folder = null;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tstatic extractDraggedTeam(ev: DragEvent): Promise<Team | null> | null {\r\n\t\tconst file = ev.dataTransfer?.files?.[0];\r\n\t\tif (!file) return null;\r\n\r\n\t\tlet name = file.name;\r\n\t\tif (name.slice(-4).toLowerCase() !== '.txt') {\r\n\t\t\t// PS.alert(`Your file \"${file.name}\" is not a valid team. Team files are \".txt\" files.`);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tname = name.slice(0, -4);\r\n\r\n\t\treturn file.text?.()?.then(result => {\r\n\t\t\tlet sets;\r\n\t\t\ttry {\r\n\t\t\t\tsets = Teams.import(result);\r\n\t\t\t} catch {\r\n\t\t\t\tPS.alert(`Your file \"${file.name}\" is not a valid team.`);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tlet format = '';\r\n\t\t\tconst bracketIndex = name.indexOf(']');\r\n\t\t\tlet isBox = false;\r\n\t\t\tif (bracketIndex >= 0) {\r\n\t\t\t\tformat = name.slice(1, bracketIndex);\r\n\t\t\t\tif (!format.startsWith('gen')) format = 'gen6' + format;\r\n\t\t\t\tif (format.endsWith('-box')) {\r\n\t\t\t\t\tformat = format.slice(0, -4);\r\n\t\t\t\t\tisBox = true;\r\n\t\t\t\t}\r\n\t\t\t\tname = name.slice(bracketIndex + 1).trim();\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tname,\r\n\t\t\t\tformat: format as ID,\r\n\t\t\t\tfolder: '',\r\n\t\t\t\tpackedTeam: Teams.pack(sets),\r\n\t\t\t\ticonCache: null,\r\n\t\t\t\tkey: '',\r\n\t\t\t\tisBox,\r\n\t\t\t} satisfies Team;\r\n\t\t});\r\n\t}\r\n\tstatic addDraggedTeam(ev: DragEvent, folder?: string) {\r\n\t\tlet index: number = (PS.dragging as any)?.team;\r\n\t\tif (typeof index !== 'number') index = 0;\r\n\t\treturn this.extractDraggedTeam(ev)?.then(team => {\r\n\t\t\tif (!team) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (folder?.endsWith('/')) {\r\n\t\t\t\tteam.folder = folder.slice(0, -1);\r\n\t\t\t} else if (folder) {\r\n\t\t\t\tteam.format = folder as ID;\r\n\t\t\t}\r\n\t\t\tPS.teams.push(team);\r\n\t\t\tPS.teams.list.pop();\r\n\t\t\tPS.teams.list.splice(index, 0, team);\r\n\t\t\tPS.teams.save();\r\n\t\t\tPS.join('teambuilder' as RoomID);\r\n\t\t\tPS.update();\r\n\t\t});\r\n\t}\r\n\tdropFolder = (ev: DragEvent) => {\r\n\t\tconst value = (ev.currentTarget as HTMLElement)?.getAttribute('data-value') || null;\r\n\t\tif (value === null || PS.dragging?.type !== 'team') return;\r\n\t\tif (value === '++' || value === '') return;\r\n\r\n\t\tPS.dragging.folder = null;\r\n\t\tlet team = PS.dragging.team;\r\n\r\n\t\tif (typeof team === 'number') {\r\n\t\t\tTeambuilderPanel.addDraggedTeam(ev, value);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (value.endsWith('/')) {\r\n\t\t\tteam.folder = value.slice(0, -1);\r\n\t\t} else {\r\n\t\t\tteam.format = value as ID;\r\n\t\t}\r\n\t\tPS.teams.save();\r\n\t\tev.stopImmediatePropagation();\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tstatic handleDrop(ev: DragEvent) {\r\n\t\tif (PS.dragging?.type === 'team' && typeof PS.dragging?.team === 'object') {\r\n\t\t\tPS.teams.save();\r\n\t\t}\r\n\t\treturn !!this.addDraggedTeam(ev, (PS.rooms['teambuilder'] as TeambuilderRoom)?.curFolder);\r\n\t}\r\n\tupdateSearch = (ev: KeyboardEvent) => {\r\n\t\tconst target = ev.currentTarget as HTMLInputElement;\r\n\t\tthis.props.room.updateSearch(target.value);\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\tclearSearch = () => {\r\n\t\tconst target = this.base!.querySelector<HTMLInputElement>('input[type=\"search\"]');\r\n\t\tif (!target) return;\r\n\t\ttarget.value = '';\r\n\t\tthis.props.room.updateSearch('');\r\n\t};\r\n\trenderFolder(value: string) {\r\n\t\tconst { room } = this.props;\r\n\t\tconst cur = room.curFolder === value;\r\n\t\tlet children;\r\n\t\tconst folderOpenIcon = cur ? 'fa-folder-open' : 'fa-folder';\r\n\t\tif (value.endsWith('/')) {\r\n\t\t\t// folder\r\n\t\t\tchildren = [\r\n\t\t\t\t<i class={`fa ${folderOpenIcon}${value === '/' ? '-o' : ''}`}></i>,\r\n\t\t\t\tvalue.slice(0, -1) || '(uncategorized)',\r\n\t\t\t];\r\n\t\t} else if (value === '') {\r\n\t\t\tchildren = [\r\n\t\t\t\t<em>(all)</em>,\r\n\t\t\t];\r\n\t\t} else if (value === '++') {\r\n\t\t\tchildren = [\r\n\t\t\t\t<i class=\"fa fa-plus\" aria-hidden></i>,\r\n\t\t\t\t<em>(add folder)</em>,\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tchildren = [\r\n\t\t\t\t<i class={`fa ${folderOpenIcon}-o`}></i>,\r\n\t\t\t\tvalue.slice(4) || '(uncategorized)',\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\t// folders were <div>s rather than <button>s because in theory it has\r\n\t\t// less weird interactions with HTML5 drag-and-drop (looking at Firefox)\r\n\t\t// modern browsers don't seem to have these bugs, so we're going to make\r\n\t\t// them buttons for now\r\n\t\tconst active = (PS.dragging as any)?.folder === value ? ' active' : '';\r\n\t\tif (cur) {\r\n\t\t\treturn <div\r\n\t\t\t\tclass=\"folder cur\" data-value={value}\r\n\t\t\t\tonDragEnter={this.dragEnterFolder} onDragLeave={this.dragLeaveFolder} onDrop={this.dropFolder}\r\n\t\t\t>\r\n\t\t\t\t<div class=\"folderhack3\">\r\n\t\t\t\t\t<div class=\"folderhack1\"></div><div class=\"folderhack2\"></div>\r\n\t\t\t\t\t<button class={`selectFolder${active}`} data-value={value}>{children}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>;\r\n\t\t}\r\n\t\treturn <div\r\n\t\t\tclass=\"folder\" data-value={value}\r\n\t\t\tonDragEnter={this.dragEnterFolder} onDragLeave={this.dragLeaveFolder} onDrop={this.dropFolder}\r\n\t\t>\r\n\t\t\t<button class={`selectFolder${active}`} data-value={value}>{children}</button>\r\n\t\t</div>;\r\n\t}\r\n\tsaveExport = (e: MouseEvent) => {\r\n\t\tconst value = this.base!.querySelector<HTMLTextAreaElement>('textarea[name=\"import\"]')?.value;\r\n\t\tif (!value) return alert('Textarea not found');\r\n\t\tif (this.props.room.exportMode !== true) return alert('Wrong export mode');\r\n\r\n\t\tconst teams = PSTeambuilder.importTeamBackup(value);\r\n\t\t// const visibleTeams = this.visibleTeams();\r\n\t\t// alert(`${teams.length} teams imported, ${visibleTeams.length} teams visible now`);\r\n\t\tPS.teams.list = [];\r\n\t\tPS.teams.byKey = {};\r\n\t\tfor (const team of teams) PS.teams.push(team);\r\n\t\t// TODO: say what changed\r\n\r\n\t\tconst room = this.props.room;\r\n\t\troom.exportMode = false;\r\n\t\tPS.teams.save();\r\n\t\troom.update(null);\r\n\t};\r\n\trenameFolder = (ev: MouseEvent) => {\r\n\t\tconst { room } = this.props;\r\n\t\tconst oldFolder = room.curFolder.slice(0, -1);\r\n\t\tconst elem = ev.currentTarget as HTMLElement;\r\n\t\tev.stopImmediatePropagation();\r\n\t\tev.preventDefault();\r\n\t\tPS.prompt(`Rename \\`\\`${oldFolder}\\`\\` to?`, { defaultValue: oldFolder, okButton: \"Rename\", parentElem: elem }).then(name => {\r\n\t\t\tname = (name || '').trim();\r\n\t\t\tif (!name) return;\r\n\t\t\tif (name === oldFolder) return;\r\n\r\n\t\t\troom.send(`/renamefolder ${name}`, elem);\r\n\t\t});\r\n\t};\r\n\tpromptDeleteFolder = (ev: MouseEvent) => {\r\n\t\tconst { room } = this.props;\r\n\t\tconst oldFolder = room.curFolder.slice(0, -1);\r\n\t\tconst elem = ev.currentTarget as HTMLElement;\r\n\t\tev.stopImmediatePropagation();\r\n\t\tev.preventDefault();\r\n\t\tPS.confirm(`Delete \\`\\`${oldFolder}\\`\\`? (doesn't delete teams)`, {\r\n\t\t\tokButton: \"Delete\", otherButtons: <button class=\"button\" data-cmd=\"/closeand /inopener /convertfoldertoprefix\">Convert to prefix</button>,\r\n\t\t\tparentElem: elem,\r\n\t\t}).then(result => {\r\n\t\t\tif (result) room.send(`/deletefolder`, elem);\r\n\t\t});\r\n\t};\r\n\trenderFolderList() {\r\n\t\tconst room = this.props.room;\r\n\t\t// The folder list isn't actually saved anywhere:\r\n\t\t// it's regenerated anew from the team list every time.\r\n\r\n\t\t// (This is why folders you create will automatically disappear\r\n\t\t// if you leave them without adding anything to them.)\r\n\r\n\t\tconst folderTable: { [folder: string]: 1 | undefined } = { '': 1 };\r\n\t\tconst folders: string[] = [];\r\n\t\tfor (const team of PS.teams.list) {\r\n\t\t\tconst folder = team.folder;\r\n\t\t\tif (folder && !(`${folder}/` in folderTable)) {\r\n\t\t\t\tfolders.push(`${folder}/`);\r\n\t\t\t\tfolderTable[`${folder}/`] = 1;\r\n\t\t\t\tif (!('/' in folderTable)) {\r\n\t\t\t\t\tfolders.push('/');\r\n\t\t\t\t\tfolderTable['/'] = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst format = team.format || room.DEFAULT_FORMAT;\r\n\t\t\tif (!(format in folderTable)) {\r\n\t\t\t\tfolders.push(format);\r\n\t\t\t\tfolderTable[format] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (room.curFolderKeep.endsWith('/') || room.curFolder.endsWith('/')) {\r\n\t\t\tif (!('/' in folderTable)) {\r\n\t\t\t\tfolders.push('/');\r\n\t\t\t\tfolderTable['/'] = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!(room.curFolderKeep in folderTable)) {\r\n\t\t\tfolderTable[room.curFolderKeep] = 1;\r\n\t\t\tfolders.push(room.curFolderKeep);\r\n\t\t}\r\n\t\tif (!(room.curFolder in folderTable)) {\r\n\t\t\tfolderTable[room.curFolder] = 1;\r\n\t\t\tfolders.push(room.curFolder);\r\n\t\t}\r\n\r\n\t\tPSUtils.sortBy(folders, folder => [\r\n\t\t\tfolder.endsWith('/') ? 10 : -parseInt(folder.charAt(3), 10),\r\n\t\t\tfolder,\r\n\t\t]);\r\n\r\n\t\tlet renderedFormatFolders = [\r\n\t\t\t<div class=\"foldersep\"></div>,\r\n\t\t\t<div class=\"folder\"><button\r\n\t\t\t\tname=\"format\" value=\"\" data-selecttype=\"teambuilder\"\r\n\t\t\t\tclass=\"selectFolder\" data-href=\"/formatdropdown\" onChange={this.addFormatFolder}\r\n\t\t\t>\r\n\t\t\t\t<i class=\"fa fa-plus\" aria-hidden></i><em>(add format folder)</em>\r\n\t\t\t</button></div>,\r\n\t\t];\r\n\r\n\t\tlet renderedFolders: preact.ComponentChild[] = [];\r\n\r\n\t\t/** 0 = folder, 1-9 = format generation */\r\n\t\tlet gen = -1;\r\n\t\tfor (let format of folders) {\r\n\t\t\tconst newGen = format.endsWith('/') ? 0 : parseInt(format.charAt(3), 10);\r\n\t\t\tif (gen !== newGen) {\r\n\t\t\t\tgen = newGen;\r\n\t\t\t\tif (gen === 0) {\r\n\t\t\t\t\trenderedFolders.push(...renderedFormatFolders);\r\n\t\t\t\t\trenderedFormatFolders = [];\r\n\t\t\t\t\trenderedFolders.push(<div class=\"foldersep\"></div>);\r\n\t\t\t\t\trenderedFolders.push(<div class=\"folder\"><h3>Folders</h3></div>);\r\n\t\t\t\t} else {\r\n\t\t\t\t\trenderedFolders.push(<div class=\"folder\"><h3>Gen {gen}</h3></div>);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trenderedFolders.push(this.renderFolder(format));\r\n\t\t}\r\n\t\trenderedFolders.push(...renderedFormatFolders);\r\n\r\n\t\treturn <div class=\"folderlist\" onClick={this.clickFolder}>\r\n\t\t\t<div class=\"folderlistbefore\"></div>\r\n\r\n\t\t\t{this.renderFolder('')}\r\n\t\t\t{renderedFolders}\r\n\t\t\t<div class=\"foldersep\"></div>\r\n\t\t\t{this.renderFolder('++')}\r\n\r\n\t\t\t<div class=\"folderlistafter\"></div>\r\n\t\t</div>;\r\n\t}\r\n\tvisibleTeams(teams?: Team[]): Team[];\r\n\tvisibleTeams(teams: (Team | null)[]): (Team | null)[];\r\n\tvisibleTeams(teams: (Team | null)[] = PS.teams.list): (Team | null)[] {\r\n\t\tconst { room } = this.props;\r\n\r\n\t\tif (room.curFolder) {\r\n\t\t\tif (room.curFolder.endsWith('/')) {\r\n\t\t\t\tconst filterFolder = room.curFolder.slice(0, -1);\r\n\t\t\t\tteams = teams.filter(team => !team || team.folder === filterFolder);\r\n\t\t\t} else {\r\n\t\t\t\tconst filterFormat = room.curFolder;\r\n\t\t\t\tteams = teams.filter(team => !team || team.format === filterFormat);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!room.searchTerms.length) return teams;\r\n\r\n\t\tconst filteredTeams = teams.filter(team => !team || room.matchesSearch(team));\r\n\t\treturn filteredTeams;\r\n\t}\r\n\tcancelClipboard = () => {\r\n\t\tTeamEditorState.clipboard = null;\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\r\n\trenderTeamPane() {\r\n\t\tconst room = this.props.room;\r\n\r\n\t\tlet teams: (Team | null)[] = PS.teams.list.slice();\r\n\t\tlet isDragging = false;\r\n\t\tif (PS.dragging?.type === 'team' && typeof PS.dragging.team === 'number') {\r\n\t\t\tteams.splice(PS.dragging.team, 0, null);\r\n\t\t\tisDragging = true;\r\n\t\t} else if (PS.teams.deletedTeams.length) {\r\n\t\t\tconst undeleteIndex = PS.teams.deletedTeams[PS.teams.deletedTeams.length - 1][1];\r\n\t\t\tteams.splice(undeleteIndex, 0, null);\r\n\t\t}\r\n\r\n\t\tlet filterFolder: string | null = null;\r\n\t\tlet filterFormat: string | null = null;\r\n\t\tlet teamTerm = 'team';\r\n\t\tif (room.curFolder) {\r\n\t\t\tif (room.curFolder.endsWith('/')) {\r\n\t\t\t\tfilterFolder = room.curFolder.slice(0, -1);\r\n\t\t\t\tteamTerm = 'team in folder';\r\n\t\t\t} else {\r\n\t\t\t\tfilterFormat = room.curFolder;\r\n\t\t\t\tif (filterFormat !== Dex.modid) teamTerm = BattleLog.formatName(filterFormat) + ' team';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst filteredTeams = this.visibleTeams(teams);\r\n\r\n\t\tif (room.exportMode) {\r\n\t\t\treturn <div class=\"teampane\">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<button data-cmd=\"/backup\" class=\"button\">\r\n\t\t\t\t\t\t<i class=\"fa fa-caret-left\" aria-hidden></i> Back\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t{room.exportMode !== true && <button class=\"button\" disabled>\r\n\t\t\t\t\t\t<i class=\"fa fa-save\" aria-hidden></i> Save (not allowed for partial exports)\r\n\t\t\t\t\t</button>}\r\n\t\t\t\t\t{room.exportMode === true && <button onClick={this.saveExport} class=\"button\">\r\n\t\t\t\t\t\t<i class=\"fa fa-save\" aria-hidden></i> Save changes\r\n\t\t\t\t\t</button>}\r\n\t\t\t\t</p>\r\n\t\t\t\t<PSTextarea\r\n\t\t\t\t\tname=\"import\" initialValue={(room.exportCode ??= PS.teams.packAll(filteredTeams.filter(Boolean) as Team[]))}\r\n\t\t\t\t/>\r\n\t\t\t</div>;\r\n\t\t}\r\n\r\n\t\tconst clipboard = window.TeamEditorState ? TeamEditorState.clipboard : null;\r\n\t\tconst clipboardTeams = clipboard?.teams;\r\n\t\treturn <div class=\"teampane\">\r\n\t\t\t{window.TeamEditorState && TeamEditorState.renderClipboard(this.cancelClipboard)}\r\n\t\t\t{filterFolder ? (\r\n\t\t\t\t<h2>\r\n\t\t\t\t\t<i class=\"fa fa-folder-open\" aria-hidden></i> {filterFolder} {}\r\n\t\t\t\t\t<button class=\"button small\" style=\"margin-left:5px\" onClick={this.renameFolder}>\r\n\t\t\t\t\t\t<i class=\"fa fa-pencil\" aria-hidden></i> Rename\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button class=\"button small\" style=\"margin-left:5px\" onClick={this.promptDeleteFolder}>\r\n\t\t\t\t\t\t<i class=\"fa fa-times\" aria-hidden></i> Remove\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</h2>\r\n\t\t\t) : filterFolder === '' ? (\r\n\t\t\t\t<h2><i class=\"fa fa-folder-open-o\" aria-hidden></i> Teams not in any folders</h2>\r\n\t\t\t) : filterFormat ? (\r\n\t\t\t\t<h2><i class=\"fa fa-folder-open-o\" aria-hidden></i> {filterFormat} <small>({teams.length})</small></h2>\r\n\t\t\t) : (\r\n\t\t\t\t<h2>All Teams <small>({teams.length})</small></h2>\r\n\t\t\t)}\r\n\t\t\t<p>\r\n\t\t\t\t<button data-cmd=\"/newteam\" class=\"button big\">\r\n\t\t\t\t\t<i class=\"fa fa-plus-circle\" aria-hidden></i> New {teamTerm}\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button data-cmd=\"/newteam box\" class=\"button\">\r\n\t\t\t\t\t<i class=\"fa fa-archive\" aria-hidden></i> New box\r\n\t\t\t\t</button>\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"search\" class=\"textbox\" placeholder=\"Search teams\"\r\n\t\t\t\t\tstyle=\"margin-left:5px;\" onKeyUp={this.updateSearch}\r\n\t\t\t\t></input>\r\n\t\t\t</p>\r\n\t\t\t<ul class=\"teamlist\">\r\n\t\t\t\t{!teams.length ? (\r\n\t\t\t\t\t<li><em>you have no teams lol</em></li>\r\n\t\t\t\t) : !filteredTeams.length && room.searchTerms.length ? (\r\n\t\t\t\t\t<li><em>you have no teams matching <code>{room.searchTerms.join(\", \")}</code></em></li>\r\n\t\t\t\t) : !filteredTeams.length ? (\r\n\t\t\t\t\t<li><em>you have no teams in this folder</em></li>\r\n\t\t\t\t) : filteredTeams.map(team => team ? (\r\n\t\t\t\t\t<li\r\n\t\t\t\t\t\tkey={team.key} onDragEnter={this.dragEnterTeam} data-teamkey={team.key}\r\n\t\t\t\t\t\tclass={clipboardTeams?.[team.key] ? 'cur' : ''}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{clipboardTeams && <div>\r\n\t\t\t\t\t\t\t<button class=\"button notifying\" data-cmd={`/pasteteamabove ${team.key}`}>\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-clipboard\" aria-hidden></i> Paste copy here\r\n\t\t\t\t\t\t\t</button> {}\r\n\t\t\t\t\t\t\t<button class=\"button notifying\" data-cmd={`/moveteamabove ${team.key}`} disabled={clipboard.readonly}>\r\n\t\t\t\t\t\t\t\t<i class=\"fa fa-arrow-right\" aria-hidden></i> Move here\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t<TeamBox team={team} onClick={this.clearSearch} /> {}\r\n\t\t\t\t\t\t{clipboardTeams && !clipboardTeams[team.key] && <button data-cmd={`/copyteam ${team.key}`} class=\"option\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-copy\" aria-hidden></i> + Clipboard\r\n\t\t\t\t\t\t</button>}\r\n\t\t\t\t\t\t{clipboardTeams?.[team.key] && <button data-cmd={`/copyteam ${team.key}`} class=\"option\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-times\" aria-hidden></i> Deselect\r\n\t\t\t\t\t\t</button>}\r\n\t\t\t\t\t\t{!clipboardTeams && <button data-cmd={`/copyteam ${team.key}`} class=\"option\" aria-label=\"Copy/move\" title=\"Copy/move\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-copy\" aria-hidden></i>\r\n\t\t\t\t\t\t</button>} {}\r\n\t\t\t\t\t\t{!clipboardTeams && !team.uploaded && <button data-cmd={`/deleteteam ${team.key}`} class=\"option\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-trash\" aria-hidden></i> Delete\r\n\t\t\t\t\t\t</button>} {}\r\n\t\t\t\t\t\t{team.uploaded?.private ? (\r\n\t\t\t\t\t\t\t<i class=\"fa fa-cloud gray\"></i>\r\n\t\t\t\t\t\t) : team.uploaded ? (\r\n\t\t\t\t\t\t\t<i class=\"fa fa-globe gray\"></i>\r\n\t\t\t\t\t\t) : team.teamid ? (\r\n\t\t\t\t\t\t\t<i class=\"fa fa-plug gray\"></i>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t) : isDragging ? (\r\n\t\t\t\t\t<li key=\"dragging\">\r\n\t\t\t\t\t\t<div class=\"team\"></div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<li key=\"undelete\">\r\n\t\t\t\t\t\t<button data-cmd=\"/undeleteteam\" class=\"option\">\r\n\t\t\t\t\t\t\t<i class=\"fa fa-undo\" aria-hidden></i> Undo delete\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t))}\r\n\t\t\t\t{clipboardTeams && <div>\r\n\t\t\t\t\t<button class=\"button notifying\" data-cmd=\"/pasteteamabove -\">\r\n\t\t\t\t\t\t<i class=\"fa fa-clipboard\" aria-hidden></i> Paste copy here\r\n\t\t\t\t\t</button> {}\r\n\t\t\t\t\t<button class=\"button notifying\" data-cmd=\"/moveteamabove -\" disabled={clipboard.readonly}>\r\n\t\t\t\t\t\t<i class=\"fa fa-arrow-right\" aria-hidden></i> Move here\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>}\r\n\t\t\t</ul>\r\n\t\t\t<p>\r\n\t\t\t\t<button data-cmd=\"/newteam bottom\" class=\"button\">\r\n\t\t\t\t\t<i class=\"fa fa-plus-circle\" aria-hidden></i> New {teamTerm}\r\n\t\t\t\t</button> {}\r\n\t\t\t\t<button data-cmd=\"/newteam box bottom\" class=\"button\">\r\n\t\t\t\t\t<i class=\"fa fa-archive\" aria-hidden></i> New box\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\t<button data-cmd=\"/backup\" class=\"button\">\r\n\t\t\t\t\t<i class=\"fa fa-file-code-o\" aria-hidden></i> Backup\r\n\t\t\t\t\t{room.searchTerms.length ? ' search results' : room.curFolder ? ' folder' : ''}\r\n\t\t\t\t</button>\r\n\t\t\t</p>\r\n\t\t</div>;\r\n\t}\r\n\toverride render() {\r\n\t\tconst room = this.props.room;\r\n\r\n\t\treturn <PSPanelWrapper room={room}>\r\n\t\t\t<div class=\"folderpane\">\r\n\t\t\t\t{this.renderFolderList()}\r\n\t\t\t</div>\r\n\t\t\t{this.renderTeamPane()}\r\n\t\t</PSPanelWrapper>;\r\n\t}\r\n}\r\n\r\nPS.addRoomType(TeambuilderPanel);\r\n"],"mappings":"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","ignoreList":[]}